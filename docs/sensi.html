<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Notes</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Notes">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Notes" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Notes" />
  
  
  



<meta name="date" content="2017-03-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="payoff.html">
<link rel="next" href="lsmc.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Unless otherwise stated,<br/>
all information here are<br/>
derived from public sources</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#basket"><i class="fa fa-check"></i><b>1.1</b> Basket</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#worstof"><i class="fa fa-check"></i><b>1.1.1</b> Worst-of</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#bestof"><i class="fa fa-check"></i><b>1.1.2</b> Best-of</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="volsurf.html"><a href="volsurf.html"><i class="fa fa-check"></i><b>2</b> Volatility Surface</a><ul>
<li class="chapter" data-level="2.1" data-path="volsurf.html"><a href="volsurf.html#implied-vol"><i class="fa fa-check"></i><b>2.1</b> Implied Vol</a></li>
<li class="chapter" data-level="2.2" data-path="volsurf.html"><a href="volsurf.html#local-vol"><i class="fa fa-check"></i><b>2.2</b> Local Vol</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="payoff.html"><a href="payoff.html"><i class="fa fa-check"></i><b>3</b> Payoff</a><ul>
<li class="chapter" data-level="3.1" data-path="payoff.html"><a href="payoff.html#noncallable"><i class="fa fa-check"></i><b>3.1</b> Noncallable</a><ul>
<li class="chapter" data-level="3.1.1" data-path="payoff.html"><a href="payoff.html#digitals"><i class="fa fa-check"></i><b>3.1.1</b> Digitals</a></li>
<li class="chapter" data-level="3.1.2" data-path="payoff.html"><a href="payoff.html#pdi"><i class="fa fa-check"></i><b>3.1.2</b> Put Down and In</a></li>
<li class="chapter" data-level="3.1.3" data-path="payoff.html"><a href="payoff.html#cuo"><i class="fa fa-check"></i><b>3.1.3</b> Call Up and Out</a></li>
<li class="chapter" data-level="3.1.4" data-path="payoff.html"><a href="payoff.html#combinations"><i class="fa fa-check"></i><b>3.1.4</b> Combinations</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="payoff.html"><a href="payoff.html#callable"><i class="fa fa-check"></i><b>3.2</b> Callable</a><ul>
<li class="chapter" data-level="3.2.1" data-path="payoff.html"><a href="payoff.html#fcn"><i class="fa fa-check"></i><b>3.2.1</b> Fixed Coupon Autocallable</a></li>
<li class="chapter" data-level="3.2.2" data-path="payoff.html"><a href="payoff.html#apollon"><i class="fa fa-check"></i><b>3.2.2</b> Snowball Coupon Autocallable</a></li>
<li class="chapter" data-level="3.2.3" data-path="payoff.html"><a href="payoff.html#issuercallable"><i class="fa fa-check"></i><b>3.2.3</b> Issuercallable</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sensi.html"><a href="sensi.html"><i class="fa fa-check"></i><b>4</b> Sensitivity</a><ul>
<li class="chapter" data-level="4.1" data-path="sensi.html"><a href="sensi.html#vol"><i class="fa fa-check"></i><b>4.1</b> Vol</a></li>
<li class="chapter" data-level="4.2" data-path="sensi.html"><a href="sensi.html#spot"><i class="fa fa-check"></i><b>4.2</b> Spot</a></li>
<li class="chapter" data-level="4.3" data-path="sensi.html"><a href="sensi.html#correl"><i class="fa fa-check"></i><b>4.3</b> Correl</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lsmc.html"><a href="lsmc.html"><i class="fa fa-check"></i><b>5</b> Longstaff Schwartz</a></li>
<li class="chapter" data-level="6" data-path="quirk.html"><a href="quirk.html"><i class="fa fa-check"></i><b>6</b> Quirkiness</a><ul>
<li class="chapter" data-level="6.1" data-path="quirk.html"><a href="quirk.html#inversion"><i class="fa fa-check"></i><b>6.1</b> Inversion</a><ul>
<li class="chapter" data-level="6.1.1" data-path="quirk.html"><a href="quirk.html#delta"><i class="fa fa-check"></i><b>6.1.1</b> Delta</a></li>
<li class="chapter" data-level="6.1.2" data-path="quirk.html"><a href="quirk.html#vega"><i class="fa fa-check"></i><b>6.1.2</b> Vega</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="quirk.html"><a href="quirk.html#gap"><i class="fa fa-check"></i><b>6.2</b> Gap</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="refer.html"><a href="refer.html"><i class="fa fa-check"></i><b>7</b> References</a><ul>
<li class="chapter" data-level="7.1" data-path="refer.html"><a href="refer.html#other-projects"><i class="fa fa-check"></i><b>7.1</b> Other projects</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="./">contact@ivanwj.com</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sensi" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Sensitivity</h1>
<p>In Chapter <a href="payoff.html#payoff">3</a> we tried to obtain an expected price of products. In this chapter we want to understand the sensitivities of these expectations. For example, when one particular variable changes, what is the effect it would have on the expectation.</p>
<p>In finance speak, when the variable is the spot price, this sensitivity is called the Delta. Another variable of interest is the sensitivity to volatility (which is called Vega). Some people are not fans of technical terms so we prefer to call the sensitivities the <em>change in expected price due to a change in some variable</em>.</p>
<p>In practice, exotic payoffs cannot be solved by closed-form formulas, so the method of partial differentiation is generally not applicable in obtaining the sensitivities.</p>
<p>Here we look at methods of finite difference approximation since they are easy to understand and implement. Several types of finite differencing approximations are available - <em>forward difference</em>, <em>backward difference</em>, and <em>central difference</em>.</p>
<p>Suppose the variable of interest is <span class="math inline">\(\theta\)</span> and it changes by amount <span class="math inline">\(h\)</span>. The expected price at a particular value of this variable can be represented as <span class="math inline">\(F(\theta)\)</span>, the <em>forward difference</em> <span class="math inline">\(\Delta_{F}\)</span> is computed as such:</p>
<p><span class="math display">\[
\Delta_{F} = \frac{\bar F(\theta + h) - \bar F(\theta)}{h}
\]</span></p>
<p>where <span class="math inline">\(\bar F(\theta + h)\)</span> is the expected price of the payoff when the variable is <span class="math inline">\(\theta + h\)</span>.</p>
<p>The <em>central difference</em> <span class="math inline">\(C(\theta)\)</span> is computed as such:</p>
<p><span class="math display">\[
\Delta_{C} = \frac{\bar C(\theta + h) - \bar C(\theta - h)}{2h}
\]</span></p>
<p>where <span class="math inline">\(\bar C(\theta + h)\)</span> is the expected price of the payoff when the variable is to <span class="math inline">\(\theta + h\)</span>.</p>
<div id="vol" class="section level2">
<h2><span class="header-section-number">4.1</span> Vol</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">call_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aVol =</span> <span class="fl">0.2</span>)</code></pre></div>
<pre><code>## [1] 0.07958281</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vecVols =<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.19</span>, <span class="fl">0.21</span>)
callPxAtDiffVol =<span class="st"> </span><span class="kw">c</span>(<span class="kw">call_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aVol =</span> vecVols[<span class="dv">1</span>]),
                   <span class="kw">call_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aVol =</span> vecVols[<span class="dv">2</span>]))
<span class="kw">plot</span>(vecVols, callPxAtDiffVol, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/sensivol_call-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># per 0.1% change in spot</span>
call_vol =<span class="st"> </span>(callPxAtDiffVol[<span class="dv">2</span>] -<span class="st"> </span>callPxAtDiffVol[<span class="dv">1</span>])/<span class="dv">2</span>
call_vol *<span class="st"> </span><span class="dv">100</span> <span class="co"># per 1% change</span></code></pre></div>
<pre><code>## [1] 0.3964437</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fcn_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aKO =</span> <span class="fl">1.02</span>, <span class="dt">aVol =</span> <span class="fl">0.3</span>)</code></pre></div>
<pre><code>## [1] -0.0395444</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vecVols =<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.29</span>, <span class="fl">0.31</span>)
fcnPxAtDiffVol =<span class="st"> </span><span class="kw">c</span>(<span class="kw">fcn_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aKO =</span> <span class="fl">1.02</span>, <span class="dt">aVol =</span> vecVols[<span class="dv">1</span>]),
                   <span class="kw">fcn_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aKO =</span> <span class="fl">1.02</span>, <span class="dt">aVol =</span> vecVols[<span class="dv">2</span>]))

fcn_vol =<span class="st"> </span>(fcnPxAtDiffVol[<span class="dv">2</span>] -<span class="st"> </span>fcnPxAtDiffVol[<span class="dv">1</span>])/<span class="dv">2</span>
fcn_vol *<span class="st"> </span><span class="dv">100</span> <span class="co"># vega per 1 vol pt change</span></code></pre></div>
<pre><code>## [1] -0.2759809</code></pre>
</div>
<div id="spot" class="section level2">
<h2><span class="header-section-number">4.2</span> Spot</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">call_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aStrike =</span> <span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] 0.07958281</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vecSpots =<span class="st"> </span><span class="kw">c</span>(<span class="dv">99</span>, <span class="dv">101</span>)/<span class="dv">100</span>
callPxAtDiffSpot =<span class="st"> </span><span class="kw">sapply</span>(vecSpots, call_px, <span class="dt">nsims =</span> <span class="dv">10000</span>)
<span class="kw">plot</span>(vecSpots, callPxAtDiffSpot, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</code></pre></div>
<p><img src="book_files/figure-html/sensispot_call-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># per 0.1% change in spot</span>
call_delta =<span class="st"> </span>(callPxAtDiffSpot[<span class="dv">2</span>] -<span class="st"> </span>callPxAtDiffSpot[<span class="dv">1</span>])/<span class="dv">2</span>
call_delta *<span class="st"> </span><span class="dv">100</span> <span class="co"># per 1% change</span></code></pre></div>
<pre><code>## [1] 0.5396399</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fcn_px</span>(<span class="dt">aSpot =</span> <span class="dv">1</span>, <span class="dt">aKO =</span> <span class="dv">1</span>, <span class="dt">aRate =</span> <span class="dv">0</span>)</code></pre></div>
<pre><code>## [1] -0.03675524</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vecSpots =<span class="st"> </span><span class="kw">c</span>(<span class="dv">99</span>, <span class="dv">101</span>)/<span class="dv">100</span>
fcnPxAtDiffSpot =<span class="st"> </span><span class="kw">sapply</span>(vecSpots, fcn_px, <span class="dt">nsims =</span> <span class="dv">10000</span>, <span class="dt">aKO =</span> <span class="fl">1.02</span>, <span class="dt">aRate =</span> <span class="dv">0</span>)
<span class="co">#plot(vecSpots, fcnPxAtDiffSpot, type = &quot;l&quot;)</span>

<span class="co"># per 0.1% change in spot</span>
fcn_delta =<span class="st"> </span>(fcnPxAtDiffSpot[<span class="dv">2</span>] -<span class="st"> </span>fcnPxAtDiffSpot[<span class="dv">1</span>])/<span class="dv">2</span>
fcn_delta *<span class="st"> </span><span class="dv">100</span> <span class="co"># per 1% change in %</span></code></pre></div>
<pre><code>## [1] 0.3860328</code></pre>
</div>
<div id="correl" class="section level2">
<h2><span class="header-section-number">4.3</span> Correl</h2>
<p>TODO</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="payoff.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lsmc.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": ["book.pdf", "book.mobi"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
