[
["index.html", "Notes Chapter 1 Diffusion 1.1 Basket 1.2 Worst-of 1.3 Best-of 1.4 Spread", " Notes Ivan Tan 2017-03-02 Chapter 1 Diffusion Suppose we prefer to model an equity diffusion using the GBM model: \\[S_T = S_0 \\cdot e^{\\Big( r-d-q -\\frac{1}{2}\\sigma^2 \\Big)\\cdot T + \\sigma \\sqrt{T}\\cdot W_T } \\] Given the drift and volatility parameters we can simulate sample final spot levels as such: aSampleSpotT = function(s0, r, d, q, sig, dt, nsims) { sT = s0 * exp((r - d - q - 0.5 * sig^2)*dt + sig * rnorm(nsims) * sqrt(dt)) sT } cat(&quot;Spot after 1 year: &quot;, aSampleSpotT(1, 0.04, 0.01, 0, 0.2, 1, 1)) ## Spot after 1 year: 0.8589298 If required we could compute over several short periods to create a trajectory. Then repeat it many times to see how the diffusion is going to look like. Assuming we will drift the equity by 0% p.a., that is \\(r - d - q = 0\\), and it has annualised volatility of 20%, let’s plot several trajectories or paths, see Figure 1.1: numSteps = 52 # weekly oneTraj = rep(1, numSteps) for (i in 2:numSteps) oneTraj[i] = aSampleSpotT(oneTraj[i-1], 0, 0, 0, 0.2, 1/numSteps, 1) cat(&quot;First 5 weekly close: &quot;, oneTraj[1:5]) ## First 5 weekly close: 1 1.013497 1.021332 1.014106 1.023558 par(mfrow = c(1, 2)) plot(oneTraj, type = &quot;l&quot;, axes = F, xlab = &quot;&quot;, ylab = &quot;&quot;, ylim = c(min(manyTraj), max(manyTraj))) box() axis(side = 2) plot(manyTraj[1,], type = &quot;l&quot;, axes = F, xlab = &quot;&quot;, ylab = &quot;&quot;, ylim = c(min(manyTraj), max(manyTraj))) box() axis(side = 2) for (i in 2:nrow(manyTraj)) lines(manyTraj[i,], type = &quot;l&quot;) Figure 1.1: Left: 1 path, Right: 100 paths 1.1 Basket What was done above assumed each path (which can be though as one underlying by itself) is independent of another, although with the same drift and volatility. However, when attempting to simulate several underlyings, it would not be unreasonable to consider the underlyings are correlated, even with different market parameters. As an example we have a basket on three underlyings, their log returns all have pairwise correlation of 90%, see Table 1.1. The (multivariate) GBM process can be extended to correlated underlyings, with their correlations preserved in the multivariate random process. One way of generating a correlated multivariate random \\(W_T\\) vector is to left-multiply a lower triangle Cholesky decomposed correlation matrix to an uncorrelated random vector.1 2 corr = matrix(c(1.0, 0.9, 0.9, 0.9, 1.0, 0.9, 0.9, 0.9, 1.0), nrow = 3, dimnames = list(c(&quot;undl1&quot;, &quot;undl2&quot;, &quot;undl3&quot;), c(&quot;undl1&quot;, &quot;undl2&quot;, &quot;undl3&quot;))) Table 1.1: 3 highly correlated underlyings undl1 undl2 undl3 undl1 1.0 0.9 0.9 undl2 0.9 1.0 0.9 undl3 0.9 0.9 1.0 corrSpot = function(s0, r, d, q, sig, dt, corrMat) { numUndls = nrow(corrMat) correlatedRV = as.double(t(chol(corrMat)) %*% rnorm(numUndls)) sT = s0 * exp((r - d - q - 0.5 * sig^2)*dt + sig * correlatedRV * sqrt(dt)) sT } numUndls = nrow(corr) numSteps = 52 # weekly corrTraj = matrix(rep(1, numSteps*numUndls), nrow = numUndls) for (i in 2:numSteps) corrTraj[,i] = corrSpot(corrTraj[,i-1], 0, 0, 0, 0.2, 1/numSteps, corr) print(corrTraj[,1:5]) # First 5 weekly close of 3 correlated undls ## [,1] [,2] [,3] [,4] [,5] ## [1,] 1 0.9781670 0.9666824 0.9681734 0.9624407 ## [2,] 1 0.9763906 0.9659574 0.9460305 0.9609013 ## [3,] 1 0.9910019 0.9783753 0.9666709 0.9546967 Sample paths of the underlyings. Underlying 1 in Black, Underlying 2 in Red, and Underlying 3 in Green. See Figure 1.2: Figure 1.2: Separate simulations of the basket trajectories 1.2 Worst-of 1.3 Best-of 1.4 Spread "],
["sensi.html", "Chapter 2 Sensitivity 2.1 Vol &amp; Smile 2.2 Correl 2.3 Drift", " Chapter 2 Sensitivity TODO: Show general method of finite difference, using forward difference and centered difference. Use it to compute, first order greeks. 2.1 Vol &amp; Smile TODO: Show that most exotic products are highly sensitive to vol surface. Term structure and skew creates the need for usage local volatility model. Generally product are vol and smile bid. TODO: Reconstruct IV surface using options prices. Plot 3d cube. TODO: Build LV surface using IV surface. Plot 3d cube. Show crazy fluctuations if IV is not smooth. TODO: Show that pricing with LV model is equal to price at constant vol. 2.2 Correl TODO: Show that most exotic bullish products are correl offer. Long worst of call = CA, Long worst of put = CA. 2.3 Drift TODO: Show that bullish products are divs and repo bid. "],
["payoff.html", "Chapter 3 Payoff 3.1 Noncallable 3.2 Autocallable 3.3 Issuercallable", " Chapter 3 Payoff 3.1 Noncallable 3.1.1 Digitals 3.1.2 Put Down and In 3.1.3 Call Up and Out 3.2 Autocallable 3.2.1 Snowball 3.2.2 Phoenix 3.2.3 Fixed Coupons Notes 3.3 Issuercallable In Progress Also see Chapter 4 "],
["lsmc.html", "Chapter 4 Longstaff Schwartz", " Chapter 4 Longstaff Schwartz In Progress TODO: Show least square regression example to compute expected price, vs exercise/exit price. Determine optimal exercise strategy. "],
["scen.html", "Chapter 5 Scenario", " Chapter 5 Scenario Those interested in exotic payoffs often want to understand the behaviour of the value the product after issuance if some variable (such as spot level) changes. TODO: Show MTM of issued products, at say 3m/6m/9m/matu, and when spot performs -10%/-5%/0%/… Show that the MTM pattern is due to specific product features. "],
["quirk.html", "Chapter 6 Quirkiness 6.1 Inversion 6.2 Gap 6.3 Qto 6.4 Correl", " Chapter 6 Quirkiness Here we look at some interesting behaviour of exotic structures 6.1 Inversion 6.1.1 Delta Even on a bullish payoff, after product issues the delta of a product can become negative when near an certain product features such as an Autocall barrier TODO: Compute delta just before KO observation when just below KO Barrier 6.1.2 Vega On lookback payoffs, the vega during different periods of the product can flip signs TODO: Compute vega during lookback observation period, vs vega after lb obs period. 6.2 Gap Many exotic structures have digital payoffs. For example the put down and in seen in Chapter 3.1.2 can have a jump in value if the barrier is breached. TODO: Compute delta just before barrier to show explosive sensi, or large gamma. 6.3 Qto It is quite common to see structure products issued in product currency which is different from the underlying currency. For example in a 1 year EUR Note linked to APPLE, the holder of the product pays and gets paid in EUR, with the payoff defined entired based on the performance only on the stock. TODO: short formula on payoff only depends on eqty perf 6.4 Correl TODO: Compute price of outperformance between 2 basket (i.e. long basket - short basket). Determine that correlation between long basket and short basket is Bid, correlation within each basket is Offer. "],
["refer.html", "Chapter 7 References", " Chapter 7 References The below made this webpage possible: Bookdown CBOE option price R Github Countless helpful people "]
]
